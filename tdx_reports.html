<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 通达信个股投资评级</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="container">
        <header class="page-header">
            <div class="header-nav">
                <a href="index.html" class="back-link">← 返回首页</a>
                <h1>🎯 通达信个股投资评级</h1>
            </div>
        </header>
        
        <div class="controls-panel">
            <div class="filter-section">
                <select id="dateFilter" class="filter-select">
                    <option value="">选择日期</option>
                </select>
                <input type="text" id="searchInput" placeholder="搜索股票代码或名称..." class="search-input">
                <select id="ratingFilter" class="filter-select">
                    <option value="">全部评级</option>
                    <option value="买入">买入</option>
                    <option value="增持">增持</option>
                    <option value="中性">中性</option>
                    <option value="减持">减持</option>
                </select>
                <select id="institutionFilter" class="filter-select">
                    <option value="">全部机构</option>
                </select>
                <button id="copyDataBtn" class="action-btn">📋 复制数据</button>
                <button id="viewJsonBtn" class="action-btn">📄 查看JSON</button>
                <button id="refreshBtn" class="action-btn">🔄 刷新</button>
            </div>
        </div>
        
        <div class="data-info" id="dataInfo" style="display: none;">
            <div class="info-item">
                <span class="info-label">获取时间:</span>
                <span id="updateTime">--</span>
            </div>
            <div class="info-item">
                <span class="info-label">研报数量:</span>
                <span id="reportCount">--</span>
            </div>
            <div class="info-item">
                <span class="info-label">覆盖股票:</span>
                <span id="stockCount">--</span>
            </div>
            <div class="info-item">
                <span class="info-label">研究机构:</span>
                <span id="institutionCount">--</span>
            </div>
        </div>
        
        <div class="stats-panel" id="statsPanel" style="display: none;">
            <h3>📈 评级分布统计</h3>
            <div class="stats-grid" id="ratingStatsGrid">
            </div>
        </div>
        
        <div class="tdx-reports-container" id="reportsContainer">
            <div class="loading">请选择日期查看数据...</div>
        </div>
    </div>
    
    <!-- 详情模态框 -->
    <div id="reportDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeReportDetailModal()">&times;</span>
                <h2 id="modalTitle">研报详情</h2>
                <div class="modal-actions">
                    <button onclick="copyReportDetail('full')" class="action-btn">📋 复制全部</button>
                    <button onclick="copyReportDetail('basic')" class="action-btn">📋 基本信息</button>
                    <button onclick="downloadReportDetail()" class="action-btn">💾 下载详情</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="reportDetailContent"></div>
            </div>
        </div>
    </div>
    
    <script src="assets/js/common.js"></script>
    <script src="assets/js/tdx_reports.js"></script>
</body>
</html>
